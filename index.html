<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ã‚­ãƒ£ãƒ©ã¨é£Ÿã¹ç‰©ã§æ­¦å™¨ã‚²ãƒƒãƒˆï¼</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; text-align: center; background: #f0f8ff; }
    h1 { color: #2a6ebb; }
    .select-group { margin: 30px 0; }
    .items { display: flex; justify-content: center; gap: 30px; margin: 20px 0; }
    .item {
      border: 3px solid #aaa;
      border-radius: 16px;
      width: 120px; height: 120px;
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      background: #fff;
      cursor: pointer;
      font-size: 1.2em;
      transition: border 0.2s, box-shadow 0.2s;
      box-shadow: 0 2px 8px #0001;
      user-select: none;
    }
    .item.selected {
      border: 3px solid #ff9800;
      background: #fff3e0;
      box-shadow: 0 4px 16px #ff980033;
    }
    #result {
      font-size: 1.5em;
      margin-top: 30px;
      color: #d2691e;
      min-height: 2em;
    }
    button { margin: 20px 10px; padding: 10px 30px; font-size: 1em; border-radius: 8px; border: none; background: #2a6ebb; color: #fff; cursor: pointer; transition: background 0.2s; }
    button:hover { background: #1a4e8a; }
  </style>
</head>
<body>
  <h1>ã‚­ãƒ£ãƒ©ã¨é£Ÿã¹ç‰©ã§æ­¦å™¨ã‚²ãƒƒãƒˆï¼</h1>
  <div class="select-group">
    <div>ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’é¸ã‚“ã§ã­</div>
    <div class="items" id="characters"></div>
  </div>
  <div class="select-group">
    <div>å¥½ããªé£Ÿã¹ç‰©ã‚’é¸ã‚“ã§ã­</div>
    <div class="items" id="foods"></div>
  </div>
  <button id="decide">ã“ã‚Œã«æ±ºã‚ãŸï¼</button>
  <button id="reset" style="display:none;">ã‚‚ã†ä¸€åº¦</button>
  <div id="result"></div>
  <script src="weaponJudge.js"></script>
  <script>
    // ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã¨é£Ÿã¹ç‰©ã®ãƒªã‚¹ãƒˆ
    const characters = [
      { name: 'ãƒ’ãƒ¼ãƒ­ãƒ¼', emoji: 'ğŸ¦¸' },
      { name: 'ã­ã“', emoji: 'ğŸ±' },
      { name: 'ãƒ­ãƒœãƒƒãƒˆ', emoji: 'ğŸ¤–' },
      { name: 'ãŠã°ã‘', emoji: 'ğŸ‘»' }
    ];
    const foods = [
      { name: 'ã‚Šã‚“ã”', emoji: 'ğŸ' },
      { name: 'ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼', emoji: 'ğŸ”' },
      { name: 'ã•ã‹ãª', emoji: 'ğŸŸ' },
      { name: 'ã‚±ãƒ¼ã‚­', emoji: 'ğŸ°' }
    ];
    let selectedChar = null;
    let selectedFood = null;
    let finished = false;

    // ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç”¨ã®é¸æŠã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯
    // ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’é¸æŠã—ãŸã¨ãã«å‘¼ã°ã‚Œã‚‹ã€‚é¸æŠçŠ¶æ…‹ã‚’æ›´æ–°ã—ã€ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒªã‚¹ãƒˆã‚’å†æç”»ã™ã‚‹ã€‚
    function selectCharacter(name) {
      selectedChar = name;
      renderList(characters, selectedChar, 'characters', selectCharacter);
    }
    // é£Ÿã¹ç‰©ç”¨ã®é¸æŠã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯
    // é£Ÿã¹ç‰©ã‚’é¸æŠã—ãŸã¨ãã«å‘¼ã°ã‚Œã‚‹ã€‚é¸æŠçŠ¶æ…‹ã‚’æ›´æ–°ã—ã€é£Ÿã¹ç‰©ãƒªã‚¹ãƒˆã‚’å†æç”»ã™ã‚‹ã€‚
    function selectFood(name) {
      selectedFood = name;
      renderList(foods, selectedFood, 'foods', selectFood);
    }

    // ãƒªã‚¹ãƒˆï¼ˆã‚­ãƒ£ãƒ©ãƒ»é£Ÿã¹ç‰©ï¼‰ã‚’æç”»ã™ã‚‹é–¢æ•°
    // list: è¡¨ç¤ºã™ã‚‹ã‚¢ã‚¤ãƒ†ãƒ é…åˆ—
    // selected: ç¾åœ¨é¸æŠã•ã‚Œã¦ã„ã‚‹ã‚¢ã‚¤ãƒ†ãƒ å
    // containerId: è¡¨ç¤ºå…ˆã®divã®ID
    // onSelect: ã‚¢ã‚¤ãƒ†ãƒ é¸æŠæ™‚ã«å‘¼ã°ã‚Œã‚‹ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯
    function renderList(list, selected, containerId, onSelect) {
      const div = document.getElementById(containerId);
      div.innerHTML = '';
      // console.log('renderList', {containerId, selected});
      list.forEach(item => {
        const el = document.createElement('div');
        const isSelected = selected === item.name;
        // console.log('item', {itemName: item.name, isSelected, selected, itemName2: item.name});
        el.className = 'item' + (isSelected ? ' selected' : '');
        el.innerHTML = `<div style="font-size:2.5em;">${item.emoji}</div><div>${item.name}</div>`;
        el.onclick = () => {
          if (finished) return;
          onSelect(item.name);
        };
        div.appendChild(el);
      });
    }

    // çµæœï¼ˆæ­¦å™¨ï¼‰ã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•°
    // é¸æŠã•ã‚ŒãŸã‚­ãƒ£ãƒ©ã¨é£Ÿã¹ç‰©ã®çµ„ã¿åˆã‚ã›ã«å¿œã˜ã¦æ­¦å™¨ã‚’æ±ºå®šã—ã€çµæœã‚’è¡¨ç¤ºã™ã‚‹
    function showResult() {
      const resultDiv = document.getElementById('result');
      if (!selectedChar || !selectedFood) {
        resultDiv.textContent = 'ã‚­ãƒ£ãƒ©ã¨é£Ÿã¹ç‰©ã‚’1ã¤ãšã¤é¸ã‚“ã§ã­ï¼';
        return;
      }
      // weaponJudge.jsã®getWeaponã‚’åˆ©ç”¨
      const weapon = window.getWeapon
        ? window.getWeapon(selectedChar, selectedFood)
        : (typeof getWeapon === 'function' ? getWeapon(selectedChar, selectedFood) : null);
      if (weapon) {
        resultDiv.innerHTML = `å›ã®æ­¦å™¨ã¯â€¦<br><span style="font-size:2em;">${weapon.emoji}</span><br>${weapon.name}ï¼`;
      } else {
        resultDiv.textContent = 'æ­¦å™¨ãŒæ±ºã¾ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚';
      }
      finished = true;
      document.getElementById('decide').style.display = 'none';
      document.getElementById('reset').style.display = '';
    }

    // ã€Œã“ã‚Œã«æ±ºã‚ãŸï¼ã€ãƒœã‚¿ãƒ³ã®ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ
    // çµæœã‚’è¡¨ç¤ºã™ã‚‹
    document.getElementById('decide').onclick = () => {
      if (!finished) showResult();
    };
    // ã€Œã‚‚ã†ä¸€åº¦ã€ãƒœã‚¿ãƒ³ã®ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ
    // é¸æŠçŠ¶æ…‹ã¨è¡¨ç¤ºã‚’ãƒªã‚»ãƒƒãƒˆã™ã‚‹
    document.getElementById('reset').onclick = () => {
      selectedChar = null;
      selectedFood = null;
      finished = false;
      document.getElementById('result').textContent = '';
      document.getElementById('decide').style.display = '';
      document.getElementById('reset').style.display = 'none';
      renderList(characters, selectedChar, 'characters', selectCharacter);
      renderList(foods, selectedFood, 'foods', selectFood);
    };

    // åˆæœŸè¡¨ç¤ºï¼ˆãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ãƒªã‚¹ãƒˆã‚’æç”»ï¼‰
    renderList(characters, selectedChar, 'characters', selectCharacter);
    renderList(foods, selectedFood, 'foods', selectFood);
  </script>
</body>
</html>
